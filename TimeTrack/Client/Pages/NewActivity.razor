@page "/client_activity/new"
@using TimeTrack.Shared
@using TimeTrack.Client.Components
@inject HttpClient Http
@inject NavigationManager NavigationManager

<PageTitle>Log Activity</PageTitle>

<MudText Typo="Typo.h1">New Activity</MudText>

<ActivityEditor Model="@model" OnSubmit="@OnValidSubmit"/>

@code {
    ActivityForm model = new ActivityForm();

    async Task OnValidSubmit(ActivityForm form)
    {
        var response = await Http.PostAsync("/api/clientactivities", JsonContent.Create(form));
        NavigationManager.NavigateTo("/");
    }
}
