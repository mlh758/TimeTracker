@page "/clients/new"
@using TimeTrack.Shared
@using TimeTrack.Client.Components
@inject HttpClient Http
@inject NavigationManager NavigationManager

<PageTitle>New Client</PageTitle>

<MudText Typo="Typo.h1">New Client</MudText>

<EditClient Model="@model" OnSubmit="@OnValidSubmit"/>

@code {
    NewClientForm model = new NewClientForm();

    async Task OnValidSubmit(NewClientForm form)
    {
        var response = await Http.PostAsync("/api/clients", JsonContent.Create(form));
        if (response.IsSuccessStatusCode) {
            NavigationManager.NavigateTo("/clients");
        }
    }
}
